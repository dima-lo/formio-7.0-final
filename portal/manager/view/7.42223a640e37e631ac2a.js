(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{bdMr:function(e,t,r){"use strict";r.r(t),r.d(t,"OfflineModule",function(){return F});var n,o=r("fXoL"),i=r("tyNb"),c=r("ofXK"),f=r("9JWQ"),u=r("D1Dn"),a=r("HXmg"),s=r("Yt1J"),l=r("Vx+w"),p=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),y=function(e,t,r,n){var o,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,n);else for(var f=e.length-1;f>=0;f--)(o=e[f])&&(c=(i<3?o(c):i>3?o(t,r,c):o(t,r))||c);return i>3&&c&&Object.defineProperty(t,r,c),c},d=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(e){function t(t,r,n,o,i){var c=e.call(this,t,r,n,o)||this;return c.appConfig=t,c.config=r,c.resourcesService=n,c.appRef=o,c.offlineService=i,c}return p(t,e),t.prototype.loadResource=function(e){var t=this;return this.setContext(e),this.isLoading=!0,this.resourceLoading=this.resourceLoaded=new Promise(function(r,n){e.params.subscribe(function(e){t.offlineService.offlinePlugin.ready.then(function(){var o=t.offlineService.offlinePlugin.getSubmissionQueueSubmission(e.form,e.id);o?(t.resource=o,t.isLoading=!1,t.refresh.emit({property:"submission",value:t.resource}),r(o)):(t.onSubmissionError("Submission not found"),n("Submission not found"))})})}),this.resourceLoading},t.prototype.save=function(e){var t=this;return this.offlineService.offlinePlugin.ready.then(function(){return t.offlineService.offlinePlugin.updateSubmissionQueueSubmission(e)})},t.prototype.remove=function(){var e=this;return this.offlineService.offlinePlugin.ready.then(function(){return e.offlineService.offlinePlugin.removeSubmissionQueueSubmission(e.resource.request)})},t.ctorParameters=function(){return[{type:l.a},{type:a.c},{type:a.i,decorators:[{type:o.Q}]},{type:o.g},{type:s.a}]},t=y([Object(o.C)(),d("design:paramtypes",[l.a,a.c,a.i,o.g,s.a])],t)}(a.g),v=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),b=function(e,t,r,n){var o,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,n);else for(var f=e.length-1;f>=0;f--)(o=e[f])&&(c=(i<3?o(c):i>3?o(t,r,c):o(t,r))||c);return i>3&&c&&Object.defineProperty(t,r,c),c},m=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=function(e){function t(t){var r=e.call(this)||this;return r.config=t,r.name=r.config.formName,r.form=r.config.formPath,r}return v(t,e),t.ctorParameters=function(){return[{type:l.a}]},t=b([Object(o.C)(),m("design:paramtypes",[l.a])],t)}(a.c),O=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),_=function(e,t,r,n){var o,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,n);else for(var f=e.length-1;f>=0;f--)(o=e[f])&&(c=(i<3?o(c):i>3?o(t,r,c):o(t,r))||c);return i>3&&c&&Object.defineProperty(t,r,c),c},j=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return O(t,e),t=_([Object(o.n)({selector:"app-header",template:"<ng-template>\r\n  <thead>\r\n  <tr>\r\n    <th>Created</th>\r\n    <th>Operation</th>\r\n    <th>Url</th>\r\n  </tr>\r\n  </thead>\r\n</ng-template>\r\n"})],t)}(u.e),w=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),P=function(e,t,r,n){var o,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,n);else for(var f=e.length-1;f>=0;f--)(o=e[f])&&(c=(i<3?o(c):i>3?o(t,r,c):o(t,r))||c);return i>3&&c&&Object.defineProperty(t,r,c),c},R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return w(t,e),t.prototype.getMethod=function(e){switch(e){case"POST":return"Create";case"PUT":return"Update";case"DELETE":return"Delete"}},t=P([Object(o.n)({selector:"app-body",template:'<ng-template>\r\n  <tbody>\r\n  <tr *ngFor="let row of rows" (click)="onRowSelect($event, row)">\r\n    <td>{{ row.created }}</td>\r\n    <td>{{ getMethod(row.method) }}</td>\r\n    <td>{{ row.url }}</td>\r\n  </tr>\r\n  </tbody>\r\n</ng-template>\r\n'})],t)}(u.c),S=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),k=function(e,t,r,n){var o,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,n);else for(var f=e.length-1;f>=0;f--)(o=e[f])&&(c=(i<3?o(c):i>3?o(t,r,c):o(t,r))||c);return i>3&&c&&Object.defineProperty(t,r,c),c},L=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return S(t,e),t=k([Object(o.n)({selector:"app-footer",template:'<ng-template>\r\n  <tfoot class="formio-grid-footer"></tfoot>\r\n</ng-template>\r\n'})],t)}(u.d),A=r("5eHb"),D=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),q=function(e,t,r,n){var o,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,n);else for(var f=e.length-1;f>=0;f--)(o=e[f])&&(c=(i<3?o(c):i>3?o(t,r,c):o(t,r))||c);return i>3&&c&&Object.defineProperty(t,r,c),c},C=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Q=function(e){function t(t,r,n,i,c,f,u,a,s){var l=e.call(this,t,r,n,i,a,s)||this;return l.service=t,l.route=r,l.router=n,l.config=i,l.offlineService=c,l.settings=f,l.toastr=u,l.ref=a,l.ngZone=s,l.refreshGrid=new o.w,l.gridComps={header:j,body:R,footer:L},l.settings.getPlan().then(function(e){["team","commercial"].indexOf(l.settings.plan)<0&&(l.toastr.warning("Limited Pro Version only Allow Anonymous Submissions, please contact support@form.io"),l.router.navigate(["/"+l.settings.path]))}),l}return D(t,e),t.prototype.emptyQueue=function(){var e=this;window.confirm("This will delete all queued offline tasks. Are you sure?")&&this.offlineService.emptyQueue().then(function(){return e.refreshGrid.emit({})})},t.prototype.clearOffline=function(){var e=this;window.confirm("This will delete all offline data. Are you sure?")&&this.offlineService.clearAll().then(function(){e.offlineService.emptyQueue(),e.grid.refreshGrid()})},t.ctorParameters=function(){return[{type:a.g},{type:i.a},{type:i.c},{type:a.c},{type:s.a},{type:l.a},{type:A.b},{type:o.k},{type:o.P}]},t.propDecorators={grid:[{type:o.mb,args:[u.b]}]},t=q([Object(o.n)({selector:"app-offline",template:'<h4>Offline Tasks</h4>\r\n<formio-grid\r\n  [src]="gridSrc"\r\n  [components]="gridComps"\r\n  [refresh]="refreshGrid"\r\n  [items]="offlineService.offlineSubmissions"\r\n  [query]="gridQuery"\r\n  [onForm]="service.formLoaded"\r\n  (rowSelect)="onSelect($event)"\r\n  (error)="service.onError($event)"\r\n  createText=""\r\n></formio-grid>\r\n<button [attr.disabled]="offlineService.isOnline ? null : \'\'" type="button" class="btn btn-warning mr-3" (click)="offlineService.dequeueSubmissions()">\r\n  <i [ngClass]="{\r\n    \'fa-spin fa-refresh\': offlineService.sync,\r\n    \'fa-send\': !offlineService.sync\r\n  }" class="fa mr-1"></i> Process Tasks\r\n</button>\r\n<button type="button" class="btn btn-light mr-3" (click)="emptyQueue()"><i class="fa fa-trash mr-2"></i> Empty Queue</button>\r\n<button type="button" class="btn btn-light" (click)="clearOffline()"><i class="fa fa-trash mr-2"></i> Clear Offline Data</button>\r\n',styles:[""]}),C("design:paramtypes",[a.g,i.a,i.c,a.c,s.a,l.a,A.b,o.k,o.P])],t)}(a.e),E=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),T=function(e,t,r,n){var o,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,n);else for(var f=e.length-1;f>=0;f--)(o=e[f])&&(c=(i<3?o(c):i>3?o(t,r,c):o(t,r))||c);return i>3&&c&&Object.defineProperty(t,r,c),c},x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t=T([Object(o.n)({selector:"app-resource",template:'<ul class="nav nav-tabs" style="margin-bottom: 10px">\r\n  <li class="nav-item"><a class="nav-link" routerLink="../"><i class="fa fa-chevron-left glyphicon glyphicon-chevron-left"></i></a></li>\r\n  <li class="nav-item" routerLinkActive="active"><a class="nav-link" routerLink="view" routerLinkActive="active">View</a></li>\r\n  <li class="nav-item" routerLinkActive="active"><a class="nav-link" routerLink="edit" routerLinkActive="active">Edit</a></li>\r\n  <li class="nav-item" routerLinkActive="active"><a class="nav-link" routerLink="delete" routerLinkActive="active"><span class="fa fa-trash glyphicon glyphicon-trash"></span></a></li>\r\n</ul>\r\n<router-outlet></router-outlet>\r\n',styles:[""]})],t)}(a.b),M=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),I=function(e,t,r,n){var o,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,n);else for(var f=e.length-1;f>=0;f--)(o=e[f])&&(c=(i<3?o(c):i>3?o(t,r,c):o(t,r))||c);return i>3&&c&&Object.defineProperty(t,r,c),c},U=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},G=function(e){function t(t,r,n){var o=e.call(this,t,r)||this;return o.service=t,o.config=r,o.offlineService=n,o}return M(t,e),t.ctorParameters=function(){return[{type:a.g},{type:a.c},{type:s.a}]},t=I([Object(o.n)({selector:"app-view",template:'<div class="card card-body bg-light">\r\n  <h3>Offline Queue Information</h3>\r\n  <ul>\r\n    <li>Created: {{ service.resource?.request?.data?.created }}</li>\r\n    <li>Request ID: {{ service.resource?.request?._id }}</li>\r\n    <li>Method: {{ service.resource?.request?.method }}</li>\r\n    <li>URL: {{ service.resource?.request?.url }}</li>\r\n  </ul>\r\n</div>\r\n<formio\r\n  *ngIf="service.resource.request"\r\n  [form]="service.form"\r\n  [submission]="service.resource.request.data"\r\n  [refresh]="service.refresh"\r\n  [hideComponents]="config.parents"\r\n  [readOnly]="true"\r\n></formio>\r\n'}),U("design:paramtypes",[a.g,a.c,s.a])],t)}(a.h),J=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$=function(e,t,r,n){var o,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,n);else for(var f=e.length-1;f>=0;f--)(o=e[f])&&(c=(i<3?o(c):i>3?o(t,r,c):o(t,r))||c);return i>3&&c&&Object.defineProperty(t,r,c),c},V=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return J(t,e),t.prototype.onSubmit=function(e){var t=this;this.service.save(e).then(function(){t.router.navigate(["../","view"],{relativeTo:t.route})}).catch(function(e){return t.triggerError.emit(e)})},t=$([Object(o.n)({selector:"app-edit",template:'<div class="card card-body bg-light">\r\n  <h3>Offline Information</h3>\r\n  <ul>\r\n    <li>Request ID: {{ service.resource?.request?._id }}</li>\r\n    <li>Method: {{ service.resource?.request?.method }}</li>\r\n    <li>URL: {{ service.resource?.request?.url }}</li>\r\n  </ul>\r\n</div>\r\n<formio\r\n  [form]="service.form"\r\n  [submission]="service.resource?.request?.data"\r\n  [error]="triggerError"\r\n  [refresh]="service.refresh"\r\n  (submit)="onSubmit($event)"\r\n></formio>\r\n'})],t)}(a.d),X=function(e,t,r,n){var o,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,n);else for(var f=e.length-1;f>=0;f--)(o=e[f])&&(c=(i<3?o(c):i>3?o(t,r,c):o(t,r))||c);return i>3&&c&&Object.defineProperty(t,r,c),c},F=function(){function e(){}return e=X([Object(o.K)({declarations:[Q,x,G,V,j,R,L],imports:[c.b,f.d,u.a,a.a,i.f.forChild(Object(a.f)({index:Q,resource:x,view:G,edit:V}))],providers:[{provide:a.g,useClass:h},{provide:a.c,useClass:g}],entryComponents:[j,R,L]})],e)}()}}]);